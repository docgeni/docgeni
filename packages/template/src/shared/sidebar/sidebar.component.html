@if (global.config.mode | dgIsLite) {
  <div class="dg-sidebar-header">
    <dg-logo></dg-logo>
    <a [routerLink]="['/']" class="title">{{ global.config.title }}</a>
    @if (global.config.description) {
      <span class="description">{{ global.config.description }}</span>
    }
  </div>
}
@if (global.config.mode | dgIsLite) {
  <dg-search></dg-search>
}
<div class="dg-menu">
  @for (menu of menus; track menu) {
    <ng-container class="menu-item">
      <ng-container *ngTemplateOutlet="navTemplate; context: { $implicit: menu }"></ng-container>
    </ng-container>
  }
  @if (global.config.mode | dgIsLite) {
    <ng-container *ngTemplateOutlet="changeLanguageTemplate"></ng-container>
  }

  <ng-template let-menu #navTemplate>
    @if (menu.items) {
      @if (menu.items.length > 0) {
        <div class="menu-group" [class.menu-group--open]="menuDisplayMap.get(menu)">
          <div class="group-header" (click)="toggle(menu)">
            @if (menu.title) {
              <div class="group-title">
                {{ menu.title }}
              </div>
            }
            @if (menu.items && menu.items.length) {
              <div class="group-arrow"><dg-icon [iconName]="'angleRight'"></dg-icon></div>
            }
          </div>
          <div class="group-body">
            @for (menu of menu.items; track menu) {
              <ng-container *ngTemplateOutlet="navTemplate; context: { $implicit: menu }"></ng-container>
            }
          </div>
        </div>
      }
    } @else {
      @if (menu.isExternal) {
        <div class="menu-item">
          <a class="item-content" href="{{ menu.path }}" target="_blank">
            <dg-icon class="external-icon" iconName="external"></dg-icon> {{ menu.title }}
          </a>
        </div>
      } @else {
        <div
          class="menu-item"
          #routerLinkActive="routerLinkActive"
          routerLinkActive="active"
          [routerLinkActiveOptions]="{ exact: !menu.examples }"
        >
          <a class="item-content" [routerLink]="['./' + menu.path]">
            <div class="item-content-title">
              {{ menu.title }}
              @if (menu.subtitle) {
                <span class="subtitle">{{ menu.subtitle }}</span>
              }
            </div>
            <div class="item-content-label">
              @if (menu.label) {
                <dg-label [labelType]="menu.label.color">{{ menu.label.text }}</dg-label>
              }
            </div>
          </a>
        </div>
        @if (menu.toc === 'menu' && routerLinkActive.isActive) {
          <dg-toc class="dg-toc-menu"></dg-toc>
        }
      }
    }
  </ng-template>
</div>

<ng-template #changeLanguageTemplate>
  @if (global.config.locales && global.config.locales.length > 1) {
    <div class="action-items">
      <div class="action-item">
        <dg-locales-selector></dg-locales-selector>
      </div>
    </div>
  }
</ng-template>
